<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.5.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Serdar Korur">

  
  
  
    
  
  <meta name="description" content="Where are we standing on fight against cancer?Five-year survival rates is a good indicator of improvement in cancer medicine.
I am using the article by Jemal et. al. published on the Journal of the National Cancer institute. You can find the original publication here: https://academic.oup.com/jnci/article/109/9/djx030/3092246
Final take home messages in this article were:
Cancer death rates continue to decrease in the United StatesBut progress is very limited in some cancersWhat is needed?">

  
  <link rel="alternate" hreflang="en-us" href="/r/ggplot2-waffle/">

  


  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css" integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ==" crossorigin="anonymous">
    

    

  

  
  
  

  
  
  
  <link rel="stylesheet" href="/css/academic.min.c2a20cef6f067a9aca7417ee68b3b161.css">

  

  
  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-148414815-1', 'auto');
      
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/r/ggplot2-waffle/">

  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="SERDAR KORUR">
  <meta property="og:url" content="/r/ggplot2-waffle/">
  <meta property="og:title" content="Cleaning and visualizing Five-year cancer survival statistics with ggplot2 and animation | SERDAR KORUR">
  <meta property="og:description" content="Where are we standing on fight against cancer?Five-year survival rates is a good indicator of improvement in cancer medicine.
I am using the article by Jemal et. al. published on the Journal of the National Cancer institute. You can find the original publication here: https://academic.oup.com/jnci/article/109/9/djx030/3092246
Final take home messages in this article were:
Cancer death rates continue to decrease in the United StatesBut progress is very limited in some cancersWhat is needed?"><meta property="og:image" content="/img/logo.png">
  <meta property="twitter:image" content="/img/logo.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2019-11-05T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2019-11-05T15:45:43&#43;01:00">
  

  


    






  





  





  





<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/r/ggplot2-waffle/"
  },
  "headline": "Cleaning and visualizing Five-year cancer survival statistics with ggplot2 and animation",
  
  "datePublished": "2019-11-05T00:00:00Z",
  "dateModified": "2019-11-05T15:45:43+01:00",
  
  "author": {
    "@type": "Person",
    "name": "Serdar Korur"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "SERDAR KORUR",
    "logo": {
      "@type": "ImageObject",
      "url": "/img/logo.png"
    }
  },
  "description": "Where are we standing on fight against cancer?\rFive-year survival rates is a good indicator of improvement in cancer medicine.\nI am using the article by Jemal et. al. published on the Journal of the National Cancer institute. You can find the original publication here: https://academic.oup.com/jnci/article/109/9/djx030/3092246\nFinal take home messages in this article were:\n\rCancer death rates continue to decrease in the United States\rBut progress is very limited in some cancers\r\rWhat is needed?"
}
</script>

  

  


  


  





  <title>Cleaning and visualizing Five-year cancer survival statistics with ggplot2 and animation | SERDAR KORUR</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/"><img src="/img/logo.png" alt="SERDAR KORUR"></a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav mr-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>About us</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#slider"><span>Tools</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span></span></a>
        </li>

        
        

      
      </ul>
      <ul class="navbar-nav ml-auto">
      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Cleaning and visualizing Five-year cancer survival statistics with ggplot2 and animation</h1>

  

  
    



<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
          Last updated on
      
    
    Nov 5, 2019
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    9 min read
  </span>
  

  
  
  
  <span class="middot-divider"></span>
  <a href="/r/ggplot2-waffle/#disqus_thread"></a>
  

  
  

  
    
<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/r/ggplot2-waffle/&amp;text=Cleaning%20and%20visualizing%20Five-year%20cancer%20survival%20statistics%20with%20ggplot2%20and%20animation" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/r/ggplot2-waffle/&amp;t=Cleaning%20and%20visualizing%20Five-year%20cancer%20survival%20statistics%20with%20ggplot2%20and%20animation" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Cleaning%20and%20visualizing%20Five-year%20cancer%20survival%20statistics%20with%20ggplot2%20and%20animation&amp;body=/r/ggplot2-waffle/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/r/ggplot2-waffle/&amp;title=Cleaning%20and%20visualizing%20Five-year%20cancer%20survival%20statistics%20with%20ggplot2%20and%20animation" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Cleaning%20and%20visualizing%20Five-year%20cancer%20survival%20statistics%20with%20ggplot2%20and%20animation%20/r/ggplot2-waffle/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/r/ggplot2-waffle/&amp;title=Cleaning%20and%20visualizing%20Five-year%20cancer%20survival%20statistics%20with%20ggplot2%20and%20animation" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>


  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      


<div id="where-are-we-standing-on-fight-against-cancer" class="section level2">
<h2>Where are we standing on fight against cancer?</h2>
<p>Five-year survival rates is a good indicator of improvement in cancer medicine.</p>
<p>I am using the article by Jemal et. al. published on the Journal of the National Cancer institute. You can find the original publication here: <a href="https://academic.oup.com/jnci/article/109/9/djx030/3092246" class="uri">https://academic.oup.com/jnci/article/109/9/djx030/3092246</a></p>
<p>Final take home messages in this article were:</p>
<ul>
<li>Cancer death rates continue to decrease in the United States</li>
<li>But <strong>progress</strong> is <strong>very limited in some cancers</strong></li>
</ul>
<p><strong>What is needed?</strong></p>
<ul>
<li>New strategies for prevention, early detection and treatment is crucial.</li>
</ul>
<p>The authors made an extensive study to investigate changes in five year cancer survival rates between the years 1975-77 to 2006-12. I want to create data visualizations to have an overview on the progress we made so far and also compare different types of cancers.</p>
<p>You can access the data on my Github repository at <a href="https://github.com/korur/healthcareinformatics">https://github.com/korur/healthcareinformatics</a>.</p>
<p>Setting up and loading in data</p>
<pre class="r"><code>library(readxl)
library(tidyverse) # ggplot2, dplyr, tidyr, readr, 
                   # purrr, tibble, stringr, forcat
library(ggdark)
library(animation)
library(waffle)

cancer &lt;- read_excel(&quot;posts_data/cancersurvivalstatistics.xls&quot;, sheet = 3)
cancer</code></pre>
<pre><code>## # A tibble: 42 x 13
##    Info  `1975-1977...2` `2006-2012...3` `Absolute (%)..~ `Proportional (~
##    &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt;           &lt;chr&gt;            &lt;chr&gt;           
##  1 All ~ 50.29999999999~ 66.40000000000~ 16               31.899999999999~
##  2 (cas~ (50.1, 50.6)    (66.2, 66.5)    (15.7, 16.3)     (31.1, 32.6)    
##  3 Oral~ 52.5            67              14.4             27.399999999999~
##  4 &lt;NA&gt;  (51.1, 54.0)    (66.1, 67.9)    (12.7, 16.1)     (23.5, 31.4)    
##  5 Esop~ 5               20.5            15.5             308.10000000000~
##  6 &lt;NA&gt;  (4.0, 6.2)      (19.4, 21.7)    (13.9, 17.1)     (217.6, 398.6)  
##  7 Stom~ 15.19999999999~ 31.10000000000~ 15.9             104.7           
##  8 &lt;NA&gt;  (14.1, 16.3)    (30.1, 32.2)    (14.4, 17.4)     (88.2, 121.1)   
##  9 Colo~ 49.79999999999~ 66.20000000000~ 16.399999999999~ 32.899999999999~
## 10 &lt;NA&gt;  (49.1, 50.6)    (65.7, 66.7)    (15.5, 17.3)     (30.7, 35.1)    
## # ... with 32 more rows, and 8 more variables: `1975-1977...6` &lt;chr&gt;,
## #   `2006-2012...7` &lt;chr&gt;, `Absolute (%)...8` &lt;chr&gt;, `Proportional
## #   (%)...9` &lt;chr&gt;, `1975-1977...10` &lt;chr&gt;, `2006-2012...11` &lt;chr&gt;,
## #   `Absolute (%)...12` &lt;chr&gt;, `Proportional (%)...13` &lt;chr&gt;</code></pre>
<p>I will use lolipop charts to plot the change in the survival rates. We need some data preparation first. You can see the <code>NAs</code> in the first row. These actually contain the confidence intervals for the survival rates. Since I will not use them I can use <code>na.omit()</code> function to remove them.</p>
<p>I will also change column names and some long cancer types for easier typing.</p>
<pre class="r"><code>cancer &lt;- na.omit(cancer)[-2, 1:5]
colnames(cancer) &lt;- c(&quot;type&quot;, &quot;Y1977&quot;, &quot;Y2012&quot;, &quot;Absolute&quot;, &quot;Proportional&quot;)
cancer[,2:5] &lt;- sapply(cancer[,2:5], as.numeric)
cancer$type[19] &lt;- &quot;Uterus&quot;
cancer$type[16] &lt;- &quot;Prostate (Men)&quot;
cancer$type[1] &lt;- &quot;All Cancers&quot;
cancer$type[12] &lt;- &quot;Brain / Nervous System&quot;
cancer$type[6] &lt;- &quot;Liver&quot;
head(cancer)</code></pre>
<pre><code>## # A tibble: 6 x 5
##   type                    Y1977 Y2012 Absolute Proportional
##   &lt;chr&gt;                   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;        &lt;dbl&gt;
## 1 All Cancers              50.3  66.4     16           31.9
## 2 Oral Cavity and Pharynx  52.5  67       14.4         27.4
## 3 Esophagus                 5    20.5     15.5        308. 
## 4 Stomach                  15.2  31.1     15.9        105. 
## 5 Colon and Rectum         49.8  66.2     16.4         32.9
## 6 Liver                     3.4  18.1     14.6        428.</code></pre>
<p>Most often I prefer data in tidy format which is:</p>
<ul>
<li>Each observation has its own row.<br />
</li>
<li>Each variable has its own column.<br />
For an <a href="https://dataatomic.com/r/predict-diseases/">example</a> post where I tidied my data with gather() function.</li>
</ul>
<p>In my data although two variables Y1977 and Y2012 are in two separate columns instead of one, I leave it as it is since it is better this way for lolipop charts and similar line charts.</p>
<p><strong>fct_reorder()</strong> function from <strong>forcats</strong> package is great for ordering factor variables according to a numeric vector. This comes with the <strong>tidyverse</strong> package we installed in the beginning. I will order my graph so that cancers with highest survival will be at the top of the graph.</p>
<pre class="r"><code>cancer %&gt;% 
    mutate(type = fct_reorder(type, Y2012)) %&gt;% 
    ggplot() + 
  # Define the start and end positions of the line of the lolipop
    geom_segment(aes(x=Y1977, xend=Y2012-1, 
                     y=type, yend=type), 
                     color=&quot;#00AFBB&quot;, size=1, 
                     arrow = arrow(length = unit(0.3,&quot;cm&quot;), type = &quot;closed&quot;)) +
  # Two geom_point for placing at beginning and end 
    geom_point(aes(x=Y1977, y=type),  color=&quot;#E7B800&quot;, size=2) + 
    geom_point(aes(x=Y2012, y=type), size=2.5, color = &quot;#FC4E07&quot;) +
  # Two Geom_point and two geom_tezt for defining the legend for points
    geom_point(aes(x=100, y=5), size = 2, color = &quot;#E7B800&quot;) +
    geom_point(aes(x=100, y=4), size =2, color = &quot;#FC4E07&quot;) + 
    geom_text(aes(x=95, y=5), color =&quot;#B2B2B2&quot;,label =&quot;1975-77&quot;) + 
    geom_text(aes(x=95, y=4), color =&quot;#B2B2B2&quot;, label =&quot;2006-12&quot;) +
  # Apply dark theme from ggdark package  
  dark_theme_gray() +
  # Describe additional theme parameters  
  theme(plot.margin=unit(c(1,1,1.5,1.2),&quot;cm&quot;),
          text = element_text(size=16),
          legend.position = &quot;none&quot;,
          axis.text.y = element_text(size=16),
          axis.title.y = element_blank(),
          axis.title.x = element_blank(),
          axis.line.y = element_blank(),
          axis.ticks.y = element_blank(),
          plot.caption = element_text(size= 12, hjust = 0, vjust = -10),
          plot.subtitle=element_text(size=12, face=&quot;italic&quot;)) +
  # Text for placing survival %s 
  # And I need a small trick here by using an ifelse statement 
  # Since in some cancers survival rate decreased and points are in reverse order 
    geom_text(mapping = aes(x = ifelse(cancer$type != &quot;Uterus&quot;, Y1977-1, Y1977+2), 
                            y=type, label=Y1977), 
              hjust = ifelse(cancer$type != &quot;Uterus&quot;,&quot;right&quot;, &quot;left&quot;), vjust=0.28) +
    geom_text(mapping = aes(x = ifelse(cancer$type != &quot;Uterus&quot;, Y2012+2, Y2012-1), 
                            y=type, label=Y2012), 
              hjust = ifelse(cancer$type != &quot;Uterus&quot;, &quot;left&quot;,&quot;right&quot;), vjust=0.28) +
    coord_cartesian(xlim = c(0, 110), expand =1) +
    scale_x_continuous(labels = function(x) paste0(x, &quot;%&quot;)) + 
    labs( caption= &quot;Data: https://doi.org/10.1093/jnci/djx030 \nVisualization: Serdar Korur&quot;,
          title = &quot;Improvement in cancer survival rates in US&quot;, 
          subtitle=&quot;Five year survival rates of most common cancer types \ncompared between 1975-77 and 2006-12&quot;)</code></pre>
<p><img src="/post/2019-11-05-visualizing-five-year-cancer-survival-statistics-with-ggplot2-and-animate_files/figure-html/Final-1.png" width="1152" /></p>
</div>
<div id="visualize-cancer-statistics-with-waffle-plots" class="section level2">
<h2>Visualize Cancer statistics with waffle plots</h2>
<p>Now, to make the waffle plot I need my data in the tidy format. I will use gather function to bring together the year variables. Plot p1 will be for years 1975-77 and p2 is for the years 2006-12.</p>
<pre class="r"><code>waffle_77 &lt;- cancer %&gt;% mutate(Y1977 = round(Y1977, 0), Y2012=round(Y2012,0)) 
waffle_77 &lt;- waffle_77 %&gt;% mutate(Yes = Y1977)
waffle_77 &lt;- waffle_77 %&gt;% mutate(No = 100-Yes)
waffle_77 &lt;- waffle_77[ ,c(1,6,7)]
# Gather the values 
waffle_tall &lt;- waffle_77 %&gt;% gather(survived, n, -type)
waffle_tall</code></pre>
<pre><code>## # A tibble: 42 x 3
##    type                    survived     n
##    &lt;chr&gt;                   &lt;chr&gt;    &lt;dbl&gt;
##  1 All Cancers             Yes         50
##  2 Oral Cavity and Pharynx Yes         52
##  3 Esophagus               Yes          5
##  4 Stomach                 Yes         15
##  5 Colon and Rectum        Yes         50
##  6 Liver                   Yes          3
##  7 Pancreas                Yes          2
##  8 Lung and Bronchus       Yes         12
##  9 Melanoma of the Skin    Yes         82
## 10 Urinary Bladder         Yes         72
## # ... with 32 more rows</code></pre>
<pre class="r"><code># Final 1
# cancer Survival rates in 20 most common cancers
p1 &lt;- waffle_tall %&gt;%
  ggplot(aes(fill=survived, values=n)) + 
  geom_waffle(color = &quot;white&quot;, 
              size = .25, 
              n_rows = 10,
              flip = TRUE) + facet_wrap(~type, nrow = 5, strip.position = &quot;top&quot;) +
  theme( plot.title = element_text(size=24, color= &quot;black&quot;, hjust=0.5),
        legend.position = c(0.55,0.1), 
        text = element_text(size=18),
         axis.text.x =element_blank(),
      axis.title.x = element_blank(), 
      axis.text.y=element_blank(),
      axis.ticks= element_blank()) +
      scale_fill_manual(values = c(&quot;#dfdedc&quot;,&quot;#16a1c6&quot;)) +
      labs(title = &quot;Five-year survival rates in most common cancers - 1975-77&quot;)</code></pre>
<pre class="r"><code>waffle_12 &lt;- cancer %&gt;% mutate(Y2012 = round(Y2012, 0), Yes=round(Y2012,0)) 
waffle_12 &lt;- waffle_12 %&gt;% mutate(Yes =Y2012)
waffle_12 &lt;- waffle_12 %&gt;% mutate(No = 100-Y2012)
waffle_12 &lt;- waffle_12[ ,c(1,6,7)]

# Gather the values 
waffle_tall_12 &lt;- waffle_12 %&gt;% gather(survived, n, -type)
waffle_tall_12</code></pre>
<pre><code>## # A tibble: 42 x 3
##    type                    survived     n
##    &lt;chr&gt;                   &lt;chr&gt;    &lt;dbl&gt;
##  1 All Cancers             Yes         66
##  2 Oral Cavity and Pharynx Yes         67
##  3 Esophagus               Yes         20
##  4 Stomach                 Yes         31
##  5 Colon and Rectum        Yes         66
##  6 Liver                   Yes         18
##  7 Pancreas                Yes          8
##  8 Lung and Bronchus       Yes         19
##  9 Melanoma of the Skin    Yes         93
## 10 Urinary Bladder         Yes         78
## # ... with 32 more rows</code></pre>
<pre class="r"><code># Final 1
# Cancer survival rates in 20 most common cancers
p2 &lt;- waffle_tall_12 %&gt;% 
  ggplot(aes(fill=survived, values=n)) + 
  geom_waffle(color = &quot;white&quot;, 
              size = .25, 
              n_rows = 10,
              flip = TRUE) + facet_wrap(~type, nrow = 5, strip.position = &quot;top&quot;) +
  theme( plot.title = element_text(size=24, color= &quot;black&quot;, hjust=0.5),
        legend.position = c(0.55,0.1), 
        text = element_text(size=18),
         axis.text.x =element_blank(),
      axis.title.x = element_blank(), 
      axis.text.y=element_blank(),
      axis.ticks= element_blank()) +
      scale_fill_manual(values = c(&quot;#dfdedc&quot;,&quot;#16a1c6&quot;)) +
      labs(title = &quot;Five-year survival rates in most common cancers - 2006-12&quot;)</code></pre>
<p>To animate my graphs I will use R package <strong>“animation”</strong> created by Yihui Xie.<br />
For more information you can read the original paper published in the Journal of Statistical Software here: <a href="https://www.jstatsoft.org/article/view/v053i01">An R Package for Creating Animations and Demonstrating Statistical Methods.</a></p>
<p>You can install from CRAN, or the development version from GitHub:</p>
<pre class="r"><code>install.packages(&quot;animation&quot;)
# or development version
# devtools::install_github(&#39;yihui/animation&#39;)</code></pre>
</div>
<div id="animate-waffle-plots-years-1975-77-and-2006-2012" class="section level2">
<h2>Animate waffle plots (years 1975-77 and 2006-2012)</h2>
<pre class="r"><code>p &lt;- list(p1,p2)

saveGIF({
    for(i in 1:2) plot(p[[i]])
},movie.name = &quot;survival.gif&quot;, interval = 0.25, nmax = 30, 
ani.width = 800)</code></pre>
<pre><code>## Output at: survival.gif</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p><img src="/img/survival.gif" /></p>
</div>
<div id="apply-ggdark-theme" class="section level2">
<h2>Apply ggdark theme</h2>
<p>I will use <a href="https://github.com/nsgrantham/ggdark">ggdark package</a> to apply a dark theme. This package contains a couple of beautiful themes. p1 will be for years 1975-77 and p2 is for the years 2006-12.</p>
<pre class="r"><code># Final 1
# cancer Survival rates in 20 most common cancers
p1 &lt;- waffle_tall %&gt;% 
  filter(survived %in% c(&quot;Yes&quot;, &quot;No&quot;)) %&gt;% ggplot(aes(fill=survived, values=n)) + 
  geom_waffle(color = &quot;white&quot;, 
              size = .25, 
              n_rows = 10,
              flip = TRUE) + facet_wrap(~type, nrow = 5, strip.position = &quot;top&quot;) + dark_theme_gray() +
  theme( plot.title = element_text(size=24, color= &quot;white&quot;, hjust=0.5),
        legend.position = c(0.55,0.1), 
        text = element_text(size=18),
         axis.text.x =element_blank(),
      axis.title.x = element_blank(), 
      axis.text.y=element_blank(),
      axis.ticks= element_blank()) +
      scale_fill_manual(values = c(&quot;#dfdedc&quot;,&quot;#16a1c6&quot;)) +
      labs(title = &quot;Five-year survival rates in most common cancers - 1975-77&quot;)</code></pre>
<pre class="r"><code># Final 1
# cancer Survival rates in 20 most common cancers
p2 &lt;- waffle_tall_12 %&gt;% 
  filter(survived %in% c(&quot;Yes&quot;, &quot;No&quot;)) %&gt;% ggplot(aes(fill=survived, values=n)) + 
  geom_waffle(color = &quot;white&quot;, 
              size = .25, 
              n_rows = 10,
              flip = TRUE) + facet_wrap(~type, nrow = 5, strip.position = &quot;top&quot;) + dark_theme_gray() +
  theme( plot.title = element_text(size=24, color= &quot;white&quot;, hjust=0.5),
        legend.position = c(0.55,0.1), 
        text = element_text(size=18),
         axis.text.x =element_blank(),
      axis.title.x = element_blank(), 
      axis.text.y=element_blank(),
      axis.ticks= element_blank()) +
      scale_fill_manual(values = c(&quot;#dfdedc&quot;,&quot;#16a1c6&quot;)) +
      labs(title = &quot;Five-year survival rates in most common cancers - 2006-12&quot;)</code></pre>
<pre class="r"><code>p &lt;- list(p1,p2)

saveGIF({
    for(i in 1:2) plot(p[[i]])
},movie.name = &quot;survival_black.gif&quot;, interval = 0.25, nmax = 30, 
ani.width = 800)</code></pre>
<pre><code>## Output at: survival_black.gif</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p><img src="/img/survival_black.gif" /></p>
</div>
<div id="future-thoughts-conclusions" class="section level1">
<h1>Future thoughts / Conclusions</h1>
<p>Here, I made two different charts, lolipop and waffle plots by using ggplot2 and animated them with the ‘Animation’ R package.</p>
<p>Creating visuals to have a good overview of data helps to understand it better and helps us to think about future directions.</p>
<p>In some type of cancers such as lung and pancreas survival rates remained very low.
How can we make it better?</p>
<p>Please comment below what do you think. What are the emerging data science applications / AI in healthcare?</p>
<p>Until next time!</p>
<p>Serdar</p>
</div>

    </div>

    


    



    
      








  






  
  
  
    
  
  
  <div class="media author-card">
    
      
      <img class="portrait mr-3" src="/authors/admin/avatar_hu96621ee6091813445ab589d945e63a4a_591724_250x250_fill_q90_lanczos_center.jpg" alt="Avatar">
    

    <div class="media-body">
      <h5 class="card-title"><a href="/">Serdar Korur</a></h5>
      <h6 class="card-subtitle">Data Scientist and PhD in Molecular Biology</h6>
      <p class="card-text">Serdar is a Data Scientist and PhD in Cell Biology</p>
      <ul class="network-icon" aria-hidden="true">
        
          
          
          
            
          
          
          
          
          
          <li>
            <a href="mailto:serdar.korur@gmail.com" >
              <i class="fas fa-envelope"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a href="https://github.com/korur/" target="_blank" rel="noopener">
              <i class="fab fa-github"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a href="https://www.linkedin.com/in/serdar-korur/" target="_blank" rel="noopener">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
        
          
          
          
            
          
          
          
          
          
            
          
          <li>
            <a href="https://medium.com/@serdarkorur" target="_blank" rel="noopener">
              <i class="fab fa-medium"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>



      
      
    

    

    
<section id="comments">
  
    
<div id="disqus_thread"></div>
<script>
  let disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); s.async = true;
    s.src = 'https://' + "serdarkorur" + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  
</section>



  </div>
</article>

      

    
    
    
    <script src="/js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/r.min.js"></script>
        
      

      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous" async></script>
      
    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.js" integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log==" crossorigin="anonymous"></script>
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    <script id="dsq-count-scr" src="https://serdarkorur.disqus.com/count.js" async></script>
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.130521ecfc6f534c52c158217bbff718.js"></script>

    






  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/terms/">Terms</a>
        
  </p>
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
